<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>זמני היום במודיעין - תפארת מורשת</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body {
      margin: 20;
      padding: 10;
      height: 100vh;
      overflow: hidden;
      font-family: 'Segoe UI', Arial, sans-serif;
      background-color: #f4f4f4; /* צבע קרם */
      direction: rtl;
    }

    .card {
      background-color: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 1px;
      box-shadow: 0 4px 50px rgba(0, 0, 0, 0.1);
    }

    .card_shabat {
  background-color: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  padding: 0px;
  border-radius: 50px;
  box-shadow: 0 8px 80px rgba(0, 0, 0, 0.2);
  margin: 10px auto;
  max-width: 1600px;
  font-size: 4.5rem; /* טקסט ענק */
  overflow-y: auto;
}

   .card_hol {
  background-color: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  padding: 38px;
  border-radius: 50px;
  box-shadow: 0 8px 80px rgba(0, 0, 0, 0.2);
  margin: 10px auto;
  max-width: 1600px;
  font-size: 4.5rem; /* טקסט ענק */
}

/* למסכים גדולים מאוד */
@media (min-width: 1920px) {
  .card_shabat {
    padding: 0px;
    font-size: 3rem;
    border-radius: 60px;
  }
}

    .notes {
  background-color: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
  padding: 14px;
  border-radius: 38px;
  justify-content: space-around;
  box-shadow: 0 4px 50px rgba(0, 0, 0, 0.1);
  margin-top: 130px; /* זה מה שמזיז אותו טיפה למטה */
}

  .notes_new {
  background-color: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(50px);
  padding: 50px;
  border-radius: 100px;
  box-shadow: 0 4px 50px rgba(0, 0, 0, 0.1);
  margin-top: 150px; /* זה מה שמזיז אותו טיפה למטה */
}

    .times-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 30px;
    }

    .times-table th, .times-table td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ddd;
    }

    .times-table th {
      background-color: #ecf0f1;
      color: black;
    }

    .times-table td {
      background-color: #ecf0f1;
    }

    .time-item {
      display: flex;
      justify-content: space-between;
      font-size: 17px;
      padding: 2px;
      border-bottom: 1px solid #2d1c1c;
      margin-bottom : 0;
    }

    .time-item:last-child {
      border-bottom: none;
    }

    /* כותרת */
    header {
      background-color: #f4f4f4; /* קרם */
      padding: 10px;
    }

    header h1 {
      color: #f4f4f4; /* חום כהה */
    }

    /* כרטיסים */
    .card {
      background-color: #f4f4f4; /* קרם בהיר יותר */
      border: 1px solid #e3c68d; /* גוון חום בהיר */
      padding: 0px;
      justify-content: center;
    }

    .text-orange-800 {
      color: #8b4513; /* חום כהה */
    }

    .text-orange-900 {
      color: #6a3e2c; /* חום יותר כהה */
    }


    .auto-scroll-vertical {
  height: 356px; /* Adjust to desired visible height */
  overflow: hidden;
  position: relative;
}

.scroll-inner {
  animation: scroll-up 13s linear infinite;
  display: inline-block;
}

@keyframes scroll-up {
  0% {
    transform: translateY(0%);
  }
  100% {
    transform: translateY(-100%);
  }
}


  </style>
</head>
<body>

<div class="flex flex-col h-full">

  <!-- כותרת -->
  <header class="py-2 flex items-center justify-center h-full">
    <h1 class="text-3xl font-bold text-center text-orange-800", style="color: #B88A44;">ברוכים הבאים לבית הכנסת הספרדי "תפארת מורשת"</h1>
  </header>

  <!-- תוכן ראשי -->
  <main class="flex-1 px-4">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 h-full">

      <!-- עמודה ימנית -->
      <div class="flex flex-col justify-between h-full">
        <img src="https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/a7b98a_IMG-20250309-WA0042.jpg"
             alt="ברוכים הבאים לבית הכנסת הספרדי תפארת מורשת"
             class="rounded-lg mb-2 w-full h-32 object-contain"/>

        <div class="card text-center text-sm mb-2">
          <div class="text-orange-333333 font-semibold" id="hebrew-date">טוען...</div>
          <div class="text-orange-333333 font-medium" id="gregorian-date">טוען...</div>
          <div class="text-orange-333333 font-bold text-lg" id="current-time">טוען...</div>
        </div>

        <div class="card_hol">
  <h2 class="text-center font-bold text-[#333333] text-3xl mb-6">🕍 זמני תפילות בחול</h2>
  <div class="grid grid-cols-2 gap-2 text-center text-sm">
    <div>
      <div class="text-[#333333]">☀️ שחרית נץ</div>
      <div id="netz"></div>
    </div>
    <div>
      <div class="text-[#333333]">🌅 שחרית מניין שני</div>
      <div id="shaharit_hol"></div>
    </div>
    <div>
      <div class="text-[#333333]">🌇 מנחה</div>
      <div id="micnhae_hol"></div>
    </div>
    <div>
      <div class="text-[#333333]">🌃 ערבית</div>
      <div id="arvit_hol"></div>
    </div>
  </div>
</div>


          <div class="card_shabat">
    <h3 class="text-center font-bold text-orange-333333 text-3xl mb-6" style="color: #333333	;">זמני שבת</h3>
    <div class="grid grid-cols-3 gap-1 text-center text-sm">
      <div>
        <div class="text-orange-333333">🕯️ הדלקת נרות 🕯️</div>
        <div id="hadlaka"></div>
      </div>
      <div>
        <div class="text-orange-333333">🌙 צאת שבת</div>
        <div id="shabt_out"></div>
      </div>
      <div>
        <div class="text-orange-333333">⛅ פלג המנחה</div>
        <div id="micnhae_pleg"></div>
      </div>
      <div>
        <div class="text-orange-333333">📖 שיר השירים</div>
        <div id="shir_shirim"></div>
      </div>
      <div>
        <div class="text-orange-333333">🕍 מנחה וקבלת שבת</div>
        <div id="kabalt_shabt"></div>
      </div>
      <div>
        <div class="text-orange-333333">☀️ שחרית</div>
        <div id="shaharit"></div>
      </div>
      <div>
        <div class="text-orange-333333">🕰️ מנחה גדולה</div>
        <div id="mincha_gdola"></div>
      </div>
      <div>
        <div class="text-orange-333333">🕰️ מנחה שנייה</div>
        <div id="mincha_sniya"></div>
      </div>
      <div>
        <div class="text-orange-333333">🌃 ערבית מוצ"ש</div>
        <div id="arvit"></div>
      </div>
    </div>
  </div>
</div>


      <!-- סליידר -->
<div class="md:col-span-2 flex flex-col justify-between h-full relative overflow-hidden">

  <!-- סלייד 1 -->
<div class="slide notes_new text-center absolute inset-0 transition-opacity duration-700 opacity-100">
  <h2 class="text-6xl font-bold" style="color: #B88A44;">הודעות חשובות</h2>

  <p class="mt-4 text-4xl text-gray-800 leading-relaxed">שלום רב,
אנחנו מזכירים למי שרכש כיסא בבית הכנסת ועדיין לא השלים את התשלום – אנא השלימו את הסכום בהקדם האפשרי.
לצורך בירורים או שאלות, ניתן לפנות לגבאים.
תזכו למצוות!</p>
  <div class="mt-6 text-2xl text-orange-900 leading-relaxed max-w-3xl mx-auto">

  </div>
</div>


    <!-- סלייד 2 -->
    <div class="slide notes_new text-center absolute inset-0 transition-opacity duration-700 opacity-0">
  <h2 class="text-3xl font-bold" style="color: #B88A44;">
     דבר תורה - אחרי מות - קדושים
  </h2>

  <p class="text-3xl font-bold" style="color: #B88A44;">
    "וְהִתְקַדִּשְׁתֶּם וִהְיִיתֶם קְדוֹשִׁים, כִּי קָדוֹש אני ה' אֱלֹהֵיכֶם" (ויקרא י"ט,2)
  </p>

  <p class="mt-4 text-2xl text-gray-800 leading-relaxed">
    בפרשת "אחרי מות" התורה מצווה עלינו להיות קדושים ולהתרחק מכל חטא שיכול לפגוע בקדושתנו.<br>
    הקדושה איננה רק טהרה חיצונית, אלא גם שמירה על המילים שלנו, המעשים שלנו, והכוונות שלנו.<br>
    המילים והמעשים שלנו יכולים להרים או להרוס – כל אחד מאיתנו נדרש להיות מודע לכך ולחיות מתוך כוונה טהורה.<br>
    קדושה זו היא תהליך מתמשך, בו אנו שואפים כל הזמן להתקרב אל ה' ולהיות טהורים במעשינו.
  </p>
</div>

<div class="slide notes_new text-center absolute inset-0 transition-opacity duration-700 opacity-0">
  <h2 class="text-8xl font-bold" style="color: #B88A44;">
    ספירת העומר
  </h2>

  <p class="mt-4 text-6xl text-gray-800 leading-relaxed"  id="omer-count">
    טוען...
  </p>
</div>

    <!-- סלייד 3 -->
    <div class="slide absolute transition-opacity duration-700 opacity-0" style="inset: 35px;">
      <h3 class="text-5xl font-bold text-center mb-2 text-orange-800", style="color: #B88A44;">שיעורים </h3>
      <table class="times-table text-sm">
        <thead>
          <tr><th>יום</th><th>שעה</th><th>נושא</th><th>מרצה</th></tr>
        </thead>
        <tbody>
          <tr><td>ראשון</td><td>20:00</td><td>טהרת המשפחה</td><td>הרב אליהו אלחרר</td></tr>
          <tr><td>רביעי</td><td>20:00</td><td>פרשת השבוע</td><td>הרב ערן ברוש</td></tr>
          <tr><td>שבת</td><td>17:50</td><td>הלכות שבת</td><td>הרב ערן ברוש</td></tr>
        </tbody>
      </table>
    </div>



  </div>
</div>


  </main>



    <script>
  let omerDay = parseInt(localStorage.getItem('omerDay')) || 24;
  let lastUpdateDate = localStorage.getItem('lastUpdateDate');
  let sunsetTime = null;

  function displayOmerCount() {
    const weeks = Math.floor(omerDay / 7);
    const days = omerDay % 7;
    const text = `היום ${omerDay} לעומר, שהם ${weeks} שבועות ו-${days} ימים`;
    const el = document.getElementById('omer-count');
    if (el) el.textContent = text;
  }

  function fetchSunsetTime(lat, lng) {
    const url = `https://api.sunrise-sunset.org/json?lat=${lat}&lng=${lng}&formatted=0`;
    fetch(url)
      .then(res => res.json())
      .then(data => {
        const sunsetUTC = new Date(data.results.sunset);
        sunsetTime = new Date(sunsetUTC.toLocaleString('en-US', {
          timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone
        }));
        console.log("שקיעה היום ב:", sunsetTime.toLocaleTimeString());
        updateOmerCount();
      })
      .catch(err => {
        console.error("שגיאה בקבלת זמן שקיעה:", err);
      });
  }

  function updateOmerCount() {
    const now = new Date();
    const todayStr = now.toISOString().split('T')[0]; // תאריך היום בפורמט YYYY-MM-DD

    // רק אם עברנו את זמן השקיעה ועדיין לא עדכנו היום
    if (sunsetTime && now >= sunsetTime && lastUpdateDate !== todayStr) {
      omerDay++;
      lastUpdateDate = todayStr;
      localStorage.setItem('omerDay', omerDay);
      localStorage.setItem('lastUpdateDate', todayStr);
      console.log("עודכן ליום חדש לעומר:", omerDay);
    }

    displayOmerCount();
  }

  window.addEventListener('DOMContentLoaded', () => {
    const lat = 32.0853; // תל אביב
    const lng = 34.7818;
    fetchSunsetTime(lat, lng);
    setInterval(updateOmerCount, 30000); // עדכון כל 30 שניות
  });
</script>


<script>

async function updateShabbatTimes() {
  try {
    // שולחים בקשה ל-API של Google Apps Script
    const response = await fetch('https://script.google.com/macros/s/AKfycbwAOlEAw9q_uJh97nZvm-M9vT4ESFnyAeayYqMIdmtud1qbLWpAYcJ5x4kJfSA15VmH/exec');

    // ממתינים שהתשובה תגיע
    const data = await response.json();  // מפענחים את התשובה ב-JSON

    // דפדוף בנתונים ועדכון האלמנטים
    data.forEach(item => {
      // כל אובייקט בנתונים מכיל את המפתח 'shabt' ואת הזמן
      const event = item.nerot; // לדוגמה: 'havdalah', 'micnhae'
      const timeUTC = item[Object.keys(item)[1]]; // מקבל את הזמן לפי שם התאריך

      // המרת הזמן לפורמט קריא: רק השעה והדקות
      const time = new Date(timeUTC);
      const hours = String(time.getHours()).padStart(2, '0'); // שעות
      const minutes = String(time.getMinutes()).padStart(2, '0'); // דקות
      const formattedTime = `${hours}:${minutes}`; // זמן בפורמט "HH:MM"

      // בהתאם לשם האירוע, מעדכנים את האלמנט המתאים
      if (event === 'hadlaka' && document.getElementById('hadlaka')) {
        document.getElementById('hadlaka').textContent = formattedTime;  // כניסת שבת
      }
      else if (event === 'shabt_out' && document.getElementById('shabt_out')) {
        document.getElementById('shabt_out').textContent = formattedTime;  // יציאת שבת
      }
      else if (event === 'micnhae_pleg' && document.getElementById('micnhae_pleg')) {
        document.getElementById('micnhae_pleg').textContent = formattedTime;  // פלג מנחה
      }
      else if (event === 'shir_shirim' && document.getElementById('shir_shirim')) {
        document.getElementById('shir_shirim').textContent = formattedTime;  // שיר השירים
      }
      else if (event === 'kabalt_shabt' && document.getElementById('kabalt_shabt')) {
        document.getElementById('kabalt_shabt').textContent = formattedTime;  // קבלת שבת
      }
      else if (event === 'shaharit' && document.getElementById('shaharit')) {
        document.getElementById('shaharit').textContent = formattedTime;  // שחרית
      }
      else if (event === 'mincha_gdola' && document.getElementById('mincha_gdola')) {
        document.getElementById('mincha_gdola').textContent = formattedTime;  // מנחה גדולה
      }
      else if (event === 'mincha_sniya' && document.getElementById('mincha_sniya')) {
        document.getElementById('mincha_sniya').textContent = formattedTime;  // מנחה שנייה
      }
      else if (event === 'arvit' && document.getElementById('arvit')) {
        document.getElementById('arvit').textContent = formattedTime;  // שחרית
      }

      //זמניי חול

      else if (event === 'netz' && document.getElementById('netz')) {
        document.getElementById('netz').textContent = formattedTime;  // נץ שחרית
      }
      else if (event === 'shaharit_hol' && document.getElementById('shaharit_hol')) {
        document.getElementById('shaharit_hol').textContent = formattedTime;  // שחרית מניין שני
      }
      else if (event === 'micnhae_hol' && document.getElementById('micnhae_hol')) {
        document.getElementById('micnhae_hol').textContent = formattedTime;  // מנחה רגילה
      }
      else if (event === 'arvit_hol' && document.getElementById('arvit_hol')) {
        document.getElementById('arvit_hol').textContent = formattedTime;  // ערבית
      }

      // אם יש יותר אירועים, ניתן להוסיף תנאים נוספים
    });

  } catch (error) {
    console.error('שגיאה בהבאת זמני השבת:', error);
    // הצגת הודעת שגיאה אם יש בעיה בקבלת הנתונים
    if (document.getElementById('shabbat-lighting')) {
      document.getElementById('shabbat-lighting').textContent = "שגיאה בהבאת זמני השבת";
    }
  }
}

// קריאה לפונקציה לעדכון זמני השבת בעת טעינת הדף
window.onload = function() {
  updateShabbatTimes();
};



</script>
<script>
  const prayerTimes = {
    city: "מודיעין",
    date: "2025-05-01",
    sunrise: "06:15",
    shmaLastTimeMGA: "07:45",
    tefilaLastTimeMGA: "09:00",
    minchaGedola: "12:45",
    plagHamincha: "19:10",
    sunset: "19:30",
    nightfall: "20:00",
    shabbatLighting: "18:50",
    shabbatOut: "20:05"
  };



  function updateTime() {
    const currentTime = new Date().toLocaleTimeString('he-IL');
    document.getElementById('current-time').textContent = currentTime;
  }

async function updateHebrewDate() {
  try {
    const today = new Date();
    const gy = today.getFullYear();
    const gm = today.getMonth() + 1;  // תיקון לחודש
    const gd = today.getDate();

    // הוספת פרמטר 'cache-buster' כדי למנוע קאש
    const cacheBuster = new Date().getTime(); // תאריך ושעה ייחודיים לכל קריאה
    const response = await fetch(`https://www.hebcal.com/converter?cfg=json&gy=${gy}&gm=${gm}&gd=${gd}&g2h=1&cb=${cacheBuster}`);
    const data = await response.json();
    const formatted = `${data.hebrew}`;
    document.getElementById('hebrew-date').textContent = formatted;
  } catch (error) {
    console.error("שגיאה בהבאת תאריך עברי:", error);
    document.getElementById('hebrew-date').textContent = "שגיאה בהבאת תאריך";
  }
}

// פונקציה לעדכון התאריך הגרגוריאני
function updateGregorianDate() {
  const gregorianDate = new Date().toLocaleDateString('he-IL', {
    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
  });
  document.getElementById('gregorian-date').textContent = gregorianDate;
}

// פונקציה לעדכון השעה הנוכחית
function updateTime() {
  const now = new Date();
  const hours = now.getHours().toString().padStart(2, '0');
  const minutes = now.getMinutes().toString().padStart(2, '0');
  const seconds = now.getSeconds().toString().padStart(2, '0');

  const formattedTime = `${hours}:${minutes}:${seconds}`;
  document.getElementById('current-time').textContent = formattedTime;
}

// פונקציה להפעלת כל העדכונים הראשוניים
async function initializeDateTimeDisplay() {
  // קריאה ראשונית לכל הפונקציות
  await updateHebrewDate();
  updateGregorianDate();
  updateTime();

  // הגדרת עדכון לכל אלמנט בקצב המתאים
  setInterval(updateTime, 1000); // עדכון שעה כל שנייה

  // עדכון תאריכים כל 5 דקות
  setInterval(() => {
    updateHebrewDate();
    updateGregorianDate();
  }, 5 * 60 * 1000); // כל 5 דקות
}

// הפעלת הפונקציה בטעינת הדף
document.addEventListener('DOMContentLoaded', initializeDateTimeDisplay);

</script>


<script>
  const slides = document.querySelectorAll('.slide');
  let currentSlide = 0;

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.style.opacity = i === index ? '1' : '0';
    });
  }

  setInterval(() => {
    currentSlide = (currentSlide + 1) % slides.length;
    showSlide(currentSlide);
  }, 10000); // כל 2 שניות

  // התחלה
  showSlide(currentSlide);
</script>
<script>
  async function fetchShabbatTimes(city = "מודיעין", date = new Date()) {
  const isoDate = date.toISOString().split("T")[0]; // yyyy-mm-dd
  const url = `https://www.hebcal.com/shabbat/?cfg=json&geonameid=293322&m=50&b=18`;

  try {
    const response = await fetch(url);
    const data = await response.json();
    return parseHebcalTimes(data);
  } catch (error) {
    console.error("שגיאה בקבלת זמני שבת:", error);
  }
}
function parseHebcalTimes(data) {
  const times = {
    shabbatLighting: null,
    shabbatOut: null,
  };

  data.items.forEach(item => {
    if (item.category === "candles") times.shabbatLighting = item.date.slice(11, 16);
    if (item.category === "havdalah") times.shabbatOut = item.date.slice(11, 16);
  });

  return times;
}

</script>
<script>
function updateAllData() {
  // שומרים את מיקום הגלילה הנוכחי
  const scrollPosition = window.scrollY;

  // מעדכנים את כל הנתונים
  updateTime();
  updateHebrewDate();
  updateGregorianDate();
  updateOmerCount();

  // מחזירים את הגלילה לאותו מיקום
  window.scrollTo(0, scrollPosition);
}

// הרצה מיידית בעת טעינת הדף
updateAllData();

// עדכון כל 60 שניות
setInterval(updateAllData, 60 * 1000);

// רענון הדף כל 8 שעות (288,000,000 מילישניות)
setInterval(function() {
  // שומרים את מיקום הגלילה הנוכחי
  const scrollPosition = window.scrollY;

  // מרעננים את הדף
  location.reload();

  // אחרי הרענון, מחזירים את מיקום הגלילה
  window.onload = function() {
    window.scrollTo(0, scrollPosition);
  };
}, 1 * 60 * 60 * 1000);

  </script>
</body>
</html>
